(()=>{"use strict";let b=e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()},S=(e,t=300)=>{let n;return(...d)=>{clearTimeout(n),n=setTimeout(()=>e(...d),t)}};function w(){let e=document.getElementById("search-button"),t=document.getElementById("algolia-search-mask"),n=document.getElementById("algolia-search-modal"),d=document.getElementById("algolia-search-input"),i=document.getElementById("algolia-search-results"),o=document.getElementById("algolia-search-summary"),c=document.getElementById("close-search-modal-btn")||document.querySelector(".close-button")||null;if(!e||!t||!n||!d||!i||!o)return;let r=null,s=null,a=()=>(window.algoliasearch&&!r&&(r=algoliasearch("GNDO5PR146","1423d4e114f7a03240e8700efd01af02"),s=r.initIndex("mygo")),!!s),u=()=>{t.classList.add("active"),n.classList.add("active"),document.body.style.overflow="hidden",setTimeout(()=>d.focus(),200)},m=()=>{t.classList.remove("active"),n.classList.remove("active"),document.body.style.overflow=""},h=l=>{if(!l||!l.length){i.innerHTML=`
          <div style="text-align:center;padding:40px 0;">
            <img src="https://cdn.siren.blue/images/528059647@2x.png" alt="\u3061\u304C\u3046" style="max-width: 120px; opacity: 0.8; margin-bottom: 1rem;" />
            <p style="color:var(--muted);">\u4EC0\u4E48\u90FD\u6CA1\u6709\u55B5~</p>
          </div>`,o.style.display="block",o.textContent="\u5171\u627E\u5230 0 \u6761\u7ED3\u679C";return}i.innerHTML=l.map(f=>{var y,v,E,L;return`
        <div class="search-hit">
          <a href="${f.url}" target="_self">
            <strong>${((v=(y=f._highlightResult)==null?void 0:y.title)==null?void 0:v.value)||f.title||""}</strong>
            <small>${((L=(E=f._snippetResult)==null?void 0:E.content)==null?void 0:L.value)||""}</small>
          </a>
        </div>`}).join(""),o.style.display="block",o.textContent=`\u5171\u627E\u5230 ${l.length} \u6761\u7ED3\u679C`},p=S(async l=>{if(!l){i.innerHTML="",o.style.display="none";return}if(a())try{let{hits:f}=await s.search(l,{highlightPreTag:"<em>",highlightPostTag:"</em>",attributesToSnippet:["content:60"],snippetEllipsisText:"..."});h(f)}catch(f){console.error("\u641C\u7D22\u51FA\u9519:",f),i.innerHTML="<p>\u641C\u7D22\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5</p>",o.style.display="none"}},300),g=l=>{l.preventDefault(),u()};e.addEventListener("click",g),e.addEventListener("touchend",g),c&&c.addEventListener("click",m),t.addEventListener("click",l=>{l.target===t&&m()}),document.addEventListener("keydown",l=>{l.key==="Escape"&&n.classList.contains("active")&&m()}),d.addEventListener("input",l=>p(l.target.value.trim()))}function x(){document.querySelectorAll(".c-code__btn--copy").forEach(e=>{e.addEventListener("click",()=>{let t=e.closest(".c-code");if(!t)return;let n=t.querySelector("pre");if(!n)return;let d=n.querySelectorAll("span.cl"),i=d.length?[...d].map(o=>o.textContent.replace(/\r?\n$/,"")).join(`
`):n.textContent.trimEnd();navigator.clipboard.writeText(i).then(()=>{e.innerHTML='<i class="fas fa-check"></i>',setTimeout(()=>e.innerHTML='<i class="fas fa-copy"></i>',1500)}).catch(()=>{let o=window.getSelection(),c=document.createRange();c.selectNodeContents(n),o.removeAllRanges(),o.addRange(c);try{document.execCommand("copy")}catch{}o.removeAllRanges()})})}),document.querySelectorAll(".c-code__btn--fold").forEach(e=>{e.addEventListener("click",()=>{let t=e.closest(".c-code");if(!t)return;t.classList.toggle("c-code--folded");let n=e.querySelector("i"),d=t.classList.contains("c-code--folded");n&&(n.className=d?"fas fa-chevron-down":"fas fa-chevron-up")})})}function _(){let e=document.querySelector(".c-nav");if(!e)return;let t=window.scrollY;window.addEventListener("scroll",()=>{let n=window.scrollY;n>t&&n>50?e.classList.add("nav-hidden"):e.classList.remove("nav-hidden"),t=n},{passive:!0})}function T(){let e=document.querySelector(".c-post__toc"),t=document.querySelector(".c-post__toc-list"),n=e?e.querySelector(".c-post__toc-empty"):null,d=document.querySelector(".c-post__content");if(!e||!t||!d)return;let i=[...d.querySelectorAll("h1, h2, h3")];if(!i.length){n&&(n.style.display="flex");return}n&&(n.style.display="none"),t.innerHTML="";let o=new Map,c="";i.forEach(s=>{s.id||(s.id=s.textContent.trim().replace(/\s+/g,"-"));let a=parseInt(s.tagName[1],10)||2,u=document.createElement("li");u.className=`c-post__toc-item level-${a}`;let m=document.createElement("a");m.href=`#${s.id}`,m.textContent=s.textContent,u.appendChild(m),a===3?(o.has(c)||o.set(c,[]),o.get(c).push(u)):(t.appendChild(u),a===2&&(c=s.id))});let r=new IntersectionObserver(s=>{s.forEach(a=>{let u=a.target.id,m=t.querySelector(`a[href="#${u}"]`);if(m&&a.isIntersecting&&a.target.tagName==="H2"){if(t.querySelectorAll("a").forEach(g=>g.classList.remove("active-h2")),m.classList.add("active-h2"),t.querySelectorAll("li.level-3").forEach(g=>g.remove()),o.has(u)){let g=m.parentElement,l=o.get(u);for(let f=l.length-1;f>=0;f--)t.insertBefore(l[f],g.nextSibling)}let h=e.getBoundingClientRect(),p=m.getBoundingClientRect();if(p.top<h.top||p.bottom>h.bottom){let g=m.offsetTop-e.clientHeight/3;e.scrollTo({top:g,behavior:"smooth"})}}})},{rootMargin:"0px 0px -60% 0px",threshold:.6});i.forEach(s=>r.observe(s)),t.addEventListener("click",s=>{let a=s.target.closest("a");if(!a)return;s.preventDefault();let u=a.getAttribute("href").slice(1),m=document.getElementById(u);if(!m)return;let p=m.getBoundingClientRect().top+window.scrollY+-60;window.scrollTo({top:p,behavior:"smooth"})})}function q(){let e=o=>{let c=o.querySelector(".c-img__img");if(!c)return;let r=()=>{let s=c.naturalWidth,a=c.naturalHeight;if(s>0&&a>0){let u=s/a;o.style.setProperty("--aspect-ratio",u)}o.classList.add("is-loaded")};c.complete?r():(c.addEventListener("load",r,{once:!0}),c.addEventListener("error",()=>o.classList.add("is-error"),{once:!0}))};document.querySelectorAll(".c-img").forEach(e),new MutationObserver(o=>{for(let c of o)c.type==="childList"&&c.addedNodes.forEach(r=>{r.nodeType===1&&(r.matches(".c-img")?e(r):r.querySelectorAll(".c-img").forEach(e))})}).observe(document.body,{childList:!0,subtree:!0});let n=document.querySelector(".c-lightbox");n||(n=document.createElement("div"),n.className="c-lightbox",n.innerHTML='<img class="c-lightbox__img" alt=""/>',document.body.appendChild(n));let d=(o,c)=>{let r=n.querySelector(".c-lightbox__img");r.src=o,r.alt=c||"",n.classList.add("is-open"),document.documentElement.style.overflow="hidden"},i=()=>{n.classList.remove("is-open"),document.documentElement.style.overflow=""};n.addEventListener("click",i),window.addEventListener("keydown",o=>{o.key==="Escape"&&i()}),document.addEventListener("click",o=>{var a,u;let c=o.target.closest(".c-img");if(!c)return;let r=c.dataset.full||((a=c.querySelector(".c-img__img"))==null?void 0:a.src),s=((u=c.querySelector(".c-img__img"))==null?void 0:u.alt)||"";r&&(o.preventDefault(),d(r,s))})}function k(){document.addEventListener("submit",e=>{let t=e.target.closest("form[data-pager]");if(!t)return;e.preventDefault();let n=t.querySelector('input[name="p"]'),d=((n==null?void 0:n.value)||"").trim(),i=parseInt(d.replace(/[^\d]/g,""),10);(!Number.isFinite(i)||i<1)&&(i=1);let o=parseInt(t.dataset.total||"0",10);Number.isFinite(o)&&o>0&&(i=Math.min(Math.max(i,1),o));let c=t.dataset.base||"/",r=(t.dataset.mode||"section").toLowerCase(),s;r==="home"?s=i<=1?"/":`/page/${i}`:s=i<=1?c:`${c}/${i}`,location.href=s},{passive:!1}),document.addEventListener("keydown",e=>{if(e.key!=="Enter")return;let t=e.target&&e.target.closest&&e.target.closest("form[data-pager]");t&&(t.requestSubmit?t.requestSubmit():t.dispatchEvent(new Event("submit",{cancelable:!0})))},{passive:!0})}b(()=>{w(),x(),_(),T(),q(),k()})})();
