

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="icon" href='https://static.dionysus.zip/static/favicon.ico' type="image/x-icon">
    <title>一个panic的代码 - MoonlitSyntax</title>

    <link rel="stylesheet" href='https://static.dionysus.zip/static/css/app-GERNH3ZV.css'>


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>

<body class="l-body">

<nav class="c-nav">
    <a href="/" class="c-nav__link">首页</a>
    <a href="/archives" class="c-nav__link">归档</a>
    <a href="/tags" class="c-nav__link">标签</a>
    <a href="/categories" class="c-nav__link">分类</a>
    <a href="/links" class="c-nav__link">友链</a>
    <a href="/about" class="c-nav__link">关于</a>
    <button id="search-button" class="c-nav__search-btn">
        <i class="fas fa-search"></i>
    </button>
</nav>


<div class="l-container">
    <div class="l-nav-spacer"></div>
    <main class="l-main">
        
<div class="c-post">
    <aside class="c-post__toc">
        <h2 class="c-post__toc-title">目录</h2>
        
        <ol class="c-post__toc-list" id="toc-list"></ol>
        
    </aside>
    <div class="c-post__main">
        <header class="c-post__header">
            <h1 class="c-post__title">一个panic的代码</h1>
            <div class="c-post__meta">
                <span class="c-post__meta-create"><i class="fas fa-calendar-plus"></i> 创建：2025-06-02 23:19</span>
                <span class="c-post__meta-updated"><i class="fas fa-calendar-check"></i> 更新：2025-06-02 23:19</span>
                <span class="c-post__meta-category"><i class="fas fa-folder-open"></i> 分类：<a href="/categories/funny"><strong>funny</strong></a></span>
            </div>
            <div class="c-post__tags">
                <a href="/tags/Golang" class="c-post__tag">#Golang</a>
            </div>
            <div class="c-post__description">
                某个群里看到的一段panic的代码截图
            </div>
        </header>

        <article class="c-post__content prose"><blockquote>
<p>ps: 运行环境是Linux和MacOS, 编译文件是MacOS ARM64下的</p>
</blockquote>
<h2 id="问题">问题</h2>
<p>打开一个不存在的文件, 调用<code>f.Name()</code>, 没有发生panic</p>
<div class="c-code"><div class="c-code__header"><div class="c-code__dots"><span class="red"></span><span class="yellow"></span><span class="green"></span></div><div class="c-code__lang">go</div><div class="c-code__actions"><button class="c-code__btn c-code__btn--copy" title="Copy code"><i class="fas fa-copy"></i></button><button class="c-code__btn c-code__btn--fold" title="Fold code"><i class="fas fa-chevron-up"></i></button></div></div><div class="c-code__content" data-lang="go"><pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;there_is_nothing&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="o">:=</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Name</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;err:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div></div><p>这里我加上一句</p>
<div class="c-code"><div class="c-code__header"><div class="c-code__dots"><span class="red"></span><span class="yellow"></span><span class="green"></span></div><div class="c-code__lang">go</div><div class="c-code__actions"><button class="c-code__btn c-code__btn--copy" title="Copy code"><i class="fas fa-copy"></i></button><button class="c-code__btn c-code__btn--fold" title="Fold code"><i class="fas fa-chevron-up"></i></button></div></div><div class="c-code__content" data-lang="go"><pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;there_is_nothing&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="o">:=</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Name</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span> <span class="c1">// 加上这一句
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;err:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div></div><p>运行后</p>
<div class="c-code"><div class="c-code__header"><div class="c-code__dots"><span class="red"></span><span class="yellow"></span><span class="green"></span></div><div class="c-code__lang is-empty"></div><div class="c-code__actions"><button class="c-code__btn c-code__btn--copy" title="Copy code"><i class="fas fa-copy"></i></button><button class="c-code__btn c-code__btn--fold" title="Fold code"><i class="fas fa-chevron-up"></i></button></div></div><div class="c-code__content"><pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">❯ go run main.go
</span></span><span class="line"><span class="cl">&lt;nil&gt;
</span></span><span class="line"><span class="cl">panic: runtime error: invalid memory address or nil pointer dereference
</span></span><span class="line"><span class="cl">[signal SIGSEGV: segmentation violation code=0x2 addr=0x0 pc=0x102978dd8]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">goroutine 1 [running]:
</span></span><span class="line"><span class="cl">os.(*File).Name(...)
</span></span><span class="line"><span class="cl">	/opt/homebrew/Cellar/go/1.24.3/libexec/src/os/file.go:62
</span></span><span class="line"><span class="cl">main.main()
</span></span><span class="line"><span class="cl">	/tmp/funny/main.go:12 +0x78
</span></span><span class="line"><span class="cl">exit status 2
</span></span></code></pre></div></div><p>看到这个东西的第一反应是大概率编译器优化,发现既然 <code>name := f.Name()</code> 的值只在 <code>err == nil</code> 分支被用到, 于是把相关的加载和调用指令移到条件判断之后</p>
<div class="c-code"><div class="c-code__header"><div class="c-code__dots"><span class="red"></span><span class="yellow"></span><span class="green"></span></div><div class="c-code__lang is-empty"></div><div class="c-code__actions"><button class="c-code__btn c-code__btn--copy" title="Copy code"><i class="fas fa-copy"></i></button><button class="c-code__btn c-code__btn--fold" title="Fold code"><i class="fas fa-chevron-up"></i></button></div></div><div class="c-code__content"><pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">go build -gcflags=&#34;all=-S&#34; -o main main.go
</span></span><span class="line"><span class="cl">go tool objdump -s main.main main
</span></span></code></pre></div></div><p>导出看看</p>
<div class="c-code"><div class="c-code__header"><div class="c-code__dots"><span class="red"></span><span class="yellow"></span><span class="green"></span></div><div class="c-code__lang">go</div><div class="c-code__actions"><button class="c-code__btn c-code__btn--copy" title="Copy code"><i class="fas fa-copy"></i></button><button class="c-code__btn c-code__btn--fold" title="Fold code"><i class="fas fa-chevron-up"></i></button></div></div><div class="c-code__content" data-lang="go"><pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="k">go</span> <span class="nx">tool</span> <span class="nx">objdump</span> <span class="o">-</span><span class="nx">s</span> <span class="nx">main</span><span class="p">.</span><span class="nx">main</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"><span class="nx">TEXT</span> <span class="nx">main</span><span class="p">.</span><span class="nf">main</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span> <span class="o">/</span><span class="nx">tmp</span><span class="o">/</span><span class="nx">funny</span><span class="o">/</span><span class="nx">main</span><span class="p">.</span><span class="k">go</span>
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cd60</span>		<span class="nx">f9400b90</span>		<span class="nx">MOVD</span> <span class="mi">16</span><span class="p">(</span><span class="nx">R28</span><span class="p">),</span> <span class="nx">R16</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cd64</span>		<span class="nx">d10043f1</span>		<span class="nx">SUB</span> <span class="err">$</span><span class="mi">16</span><span class="p">,</span> <span class="nx">RSP</span><span class="p">,</span> <span class="nx">R17</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cd68</span>		<span class="nx">eb10023f</span>		<span class="nx">CMP</span> <span class="nx">R16</span><span class="p">,</span> <span class="nx">R17</span>				
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cd6c</span>		<span class="mi">540009</span><span class="nx">a9</span>		<span class="nx">BLS</span> <span class="mi">77</span><span class="p">(</span><span class="nx">PC</span><span class="p">)</span>				
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cd70</span>		<span class="nx">f8170ffe</span>		<span class="nx">MOVD</span><span class="p">.</span><span class="nx">W</span> <span class="nx">R30</span><span class="p">,</span> <span class="o">-</span><span class="mi">144</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cd74</span>		<span class="nx">f81f83fd</span>		<span class="nx">MOVD</span> <span class="nx">R29</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cd78</span>		<span class="nx">d10023fd</span>		<span class="nx">SUB</span> <span class="err">$</span><span class="mi">8</span><span class="p">,</span> <span class="nx">RSP</span><span class="p">,</span> <span class="nx">R29</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">9</span>		<span class="mh">0x10009cd7c</span>		<span class="nx">d503201f</span>		<span class="nx">NOOP</span>					
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">370</span>		<span class="mh">0x10009cd80</span>		<span class="nx">d0000000</span>		<span class="nx">ADRP</span> <span class="mi">8192</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">370</span>		<span class="mh">0x10009cd84</span>		<span class="mi">91313800</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">3150</span><span class="p">,</span> <span class="nx">R0</span><span class="p">,</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">370</span>		<span class="mh">0x10009cd88</span>		<span class="nx">b27c03e1</span>		<span class="nx">ORR</span> <span class="err">$</span><span class="mi">16</span><span class="p">,</span> <span class="nx">ZR</span><span class="p">,</span> <span class="nx">R1</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">370</span>		<span class="mh">0x10009cd8c</span>		<span class="nx">aa1f03e2</span>		<span class="nx">MOVD</span> <span class="nx">ZR</span><span class="p">,</span> <span class="nx">R2</span>				
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">370</span>		<span class="mh">0x10009cd90</span>		<span class="nx">aa1f03e3</span>		<span class="nx">MOVD</span> <span class="nx">ZR</span><span class="p">,</span> <span class="nx">R3</span>				
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">370</span>		<span class="mh">0x10009cd94</span>		<span class="mi">97</span><span class="nx">ffda8b</span>		<span class="nx">CALL</span> <span class="nx">os</span><span class="p">.</span><span class="nf">OpenFile</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">370</span>		<span class="mh">0x10009cd98</span>		<span class="nx">f90023e0</span>		<span class="nx">MOVD</span> <span class="nx">R0</span><span class="p">,</span> <span class="mi">64</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">370</span>		<span class="mh">0x10009cd9c</span>		<span class="nx">f9001be1</span>		<span class="nx">MOVD</span> <span class="nx">R1</span><span class="p">,</span> <span class="mi">48</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">370</span>		<span class="mh">0x10009cda0</span>		<span class="nx">f9001fe2</span>		<span class="nx">MOVD</span> <span class="nx">R2</span><span class="p">,</span> <span class="mi">56</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">10</span>		<span class="mh">0x10009cda4</span>		<span class="nx">f0000244</span>		<span class="nx">ADRP</span> <span class="mi">307200</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R4</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">10</span>		<span class="mh">0x10009cda8</span>		<span class="mi">91358084</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">3424</span><span class="p">,</span> <span class="nx">R4</span><span class="p">,</span> <span class="nx">R4</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">10</span>		<span class="mh">0x10009cdac</span>		<span class="nx">f9003fe4</span>		<span class="nx">MOVD</span> <span class="nx">R4</span><span class="p">,</span> <span class="mi">120</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">10</span>		<span class="mh">0x10009cdb0</span>		<span class="nx">f90043e0</span>		<span class="nx">MOVD</span> <span class="nx">R0</span><span class="p">,</span> <span class="mi">128</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009cdb4</span>		<span class="nx">b00006db</span>		<span class="nx">ADRP</span> <span class="mi">888832</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R27</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009cdb8</span>		<span class="nx">f9471761</span>		<span class="nx">MOVD</span> <span class="mi">3624</span><span class="p">(</span><span class="nx">R27</span><span class="p">),</span> <span class="nx">R1</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009cdbc</span>		<span class="mi">90000280</span>		<span class="nx">ADRP</span> <span class="mi">327680</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009cdc0</span>		<span class="mi">910</span><span class="nx">c6000</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">792</span><span class="p">,</span> <span class="nx">R0</span><span class="p">,</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009cdc4</span>		<span class="mf">9101e3</span><span class="nx">e2</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">120</span><span class="p">,</span> <span class="nx">RSP</span><span class="p">,</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009cdc8</span>		<span class="nx">b24003e3</span>		<span class="nx">ORR</span> <span class="err">$</span><span class="mi">1</span><span class="p">,</span> <span class="nx">ZR</span><span class="p">,</span> <span class="nx">R3</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009cdcc</span>		<span class="nx">aa0303e4</span>		<span class="nx">MOVD</span> <span class="nx">R3</span><span class="p">,</span> <span class="nx">R4</span>				
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009cdd0</span>		<span class="mi">97</span><span class="nx">ffecec</span>		<span class="nx">CALL</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">12</span>		<span class="mh">0x10009cdd4</span>		<span class="nx">d503201f</span>		<span class="nx">NOOP</span>					
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">15</span>		<span class="mh">0x10009cdd8</span>		<span class="nx">f9401be0</span>		<span class="nx">MOVD</span> <span class="mi">48</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">15</span>		<span class="mh">0x10009cddc</span>		<span class="nx">b4000380</span>		<span class="nx">CBZ</span> <span class="nx">R0</span><span class="p">,</span> <span class="mi">28</span><span class="p">(</span><span class="nx">PC</span><span class="p">)</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009cde0</span>		<span class="nx">f9400c01</span>		<span class="nx">MOVD</span> <span class="mi">24</span><span class="p">(</span><span class="nx">R0</span><span class="p">),</span> <span class="nx">R1</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009cde4</span>		<span class="nx">f9401fe0</span>		<span class="nx">MOVD</span> <span class="mi">56</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009cde8</span>		<span class="nx">d63f0020</span>		<span class="nf">CALL</span> <span class="p">(</span><span class="nx">R1</span><span class="p">)</span>				
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009cdec</span>		<span class="nx">a905ffff</span>		<span class="nf">STP</span> <span class="p">(</span><span class="nx">ZR</span><span class="p">,</span> <span class="nx">ZR</span><span class="p">),</span> <span class="mi">88</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009cdf0</span>		<span class="nx">a906ffff</span>		<span class="nf">STP</span> <span class="p">(</span><span class="nx">ZR</span><span class="p">,</span> <span class="nx">ZR</span><span class="p">),</span> <span class="mi">104</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009cdf4</span>		<span class="nx">b00001a2</span>		<span class="nx">ADRP</span> <span class="mi">217088</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009cdf8</span>		<span class="mi">91348042</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">3360</span><span class="p">,</span> <span class="nx">R2</span><span class="p">,</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009cdfc</span>		<span class="nx">f9002fe2</span>		<span class="nx">MOVD</span> <span class="nx">R2</span><span class="p">,</span> <span class="mi">88</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009ce00</span>		<span class="nx">f0000262</span>		<span class="nx">ADRP</span> <span class="mi">323584</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009ce04</span>		<span class="mi">9135</span><span class="nx">a042</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">3432</span><span class="p">,</span> <span class="nx">R2</span><span class="p">,</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009ce08</span>		<span class="nx">f90033e2</span>		<span class="nx">MOVD</span> <span class="nx">R2</span><span class="p">,</span> <span class="mi">96</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009ce0c</span>		<span class="mi">97</span><span class="nx">ff222d</span>		<span class="nx">CALL</span> <span class="nx">runtime</span><span class="p">.</span><span class="nf">convTstring</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009ce10</span>		<span class="nx">b00001a1</span>		<span class="nx">ADRP</span> <span class="mi">217088</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R1</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009ce14</span>		<span class="mi">91348021</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">3360</span><span class="p">,</span> <span class="nx">R1</span><span class="p">,</span> <span class="nx">R1</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009ce18</span>		<span class="nx">f90037e1</span>		<span class="nx">MOVD</span> <span class="nx">R1</span><span class="p">,</span> <span class="mi">104</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">16</span>		<span class="mh">0x10009ce1c</span>		<span class="nx">f9003be0</span>		<span class="nx">MOVD</span> <span class="nx">R0</span><span class="p">,</span> <span class="mi">112</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce20</span>		<span class="nx">b00006db</span>		<span class="nx">ADRP</span> <span class="mi">888832</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R27</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce24</span>		<span class="nx">f9471761</span>		<span class="nx">MOVD</span> <span class="mi">3624</span><span class="p">(</span><span class="nx">R27</span><span class="p">),</span> <span class="nx">R1</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce28</span>		<span class="mi">90000280</span>		<span class="nx">ADRP</span> <span class="mi">327680</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce2c</span>		<span class="mi">910</span><span class="nx">c6000</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">792</span><span class="p">,</span> <span class="nx">R0</span><span class="p">,</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce30</span>		<span class="mf">910163e2</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">88</span><span class="p">,</span> <span class="nx">RSP</span><span class="p">,</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce34</span>		<span class="nx">b27f03e3</span>		<span class="nx">ORR</span> <span class="err">$</span><span class="mi">2</span><span class="p">,</span> <span class="nx">ZR</span><span class="p">,</span> <span class="nx">R3</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce38</span>		<span class="nx">aa0303e4</span>		<span class="nx">MOVD</span> <span class="nx">R3</span><span class="p">,</span> <span class="nx">R4</span>				
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce3c</span>		<span class="mi">97</span><span class="nx">ffecd1</span>		<span class="nx">CALL</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">17</span>		<span class="mh">0x10009ce40</span>		<span class="nx">f85f83fd</span>		<span class="nx">MOVD</span> <span class="o">-</span><span class="mi">8</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R29</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">17</span>		<span class="mh">0x10009ce44</span>		<span class="nx">f84907fe</span>		<span class="nx">MOVD</span><span class="p">.</span><span class="nx">P</span> <span class="mi">144</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R30</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">17</span>		<span class="mh">0x10009ce48</span>		<span class="nx">d65f03c0</span>		<span class="nx">RET</span>					
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009ce4c</span>		<span class="nx">f94023e2</span>		<span class="nx">MOVD</span> <span class="mi">64</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009ce50</span>		<span class="nx">f9400042</span>		<span class="nf">MOVD</span> <span class="p">(</span><span class="nx">R2</span><span class="p">),</span> <span class="nx">R2</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009ce54</span>		<span class="nx">f9401c40</span>		<span class="nx">MOVD</span> <span class="mi">56</span><span class="p">(</span><span class="nx">R2</span><span class="p">),</span> <span class="nx">R0</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009ce58</span>		<span class="nx">f9402041</span>		<span class="nx">MOVD</span> <span class="mi">64</span><span class="p">(</span><span class="nx">R2</span><span class="p">),</span> <span class="nx">R1</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">20</span>		<span class="mh">0x10009ce5c</span>		<span class="nx">a904ffff</span>		<span class="nf">STP</span> <span class="p">(</span><span class="nx">ZR</span><span class="p">,</span> <span class="nx">ZR</span><span class="p">),</span> <span class="mi">72</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">20</span>		<span class="mh">0x10009ce60</span>		<span class="mi">97</span><span class="nx">ff2218</span>		<span class="nx">CALL</span> <span class="nx">runtime</span><span class="p">.</span><span class="nf">convTstring</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">20</span>		<span class="mh">0x10009ce64</span>		<span class="nx">b00001a2</span>		<span class="nx">ADRP</span> <span class="mi">217088</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">20</span>		<span class="mh">0x10009ce68</span>		<span class="mi">91348042</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">3360</span><span class="p">,</span> <span class="nx">R2</span><span class="p">,</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">20</span>		<span class="mh">0x10009ce6c</span>		<span class="nx">f90027e2</span>		<span class="nx">MOVD</span> <span class="nx">R2</span><span class="p">,</span> <span class="mi">72</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">20</span>		<span class="mh">0x10009ce70</span>		<span class="nx">f9002be0</span>		<span class="nx">MOVD</span> <span class="nx">R0</span><span class="p">,</span> <span class="mi">80</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce74</span>		<span class="nx">b00006db</span>		<span class="nx">ADRP</span> <span class="mi">888832</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R27</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce78</span>		<span class="nx">f9471761</span>		<span class="nx">MOVD</span> <span class="mi">3624</span><span class="p">(</span><span class="nx">R27</span><span class="p">),</span> <span class="nx">R1</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce7c</span>		<span class="mi">90000280</span>		<span class="nx">ADRP</span> <span class="mi">327680</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce80</span>		<span class="mi">910</span><span class="nx">c6000</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">792</span><span class="p">,</span> <span class="nx">R0</span><span class="p">,</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce84</span>		<span class="mf">910123e2</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">72</span><span class="p">,</span> <span class="nx">RSP</span><span class="p">,</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce88</span>		<span class="nx">b24003e3</span>		<span class="nx">ORR</span> <span class="err">$</span><span class="mi">1</span><span class="p">,</span> <span class="nx">ZR</span><span class="p">,</span> <span class="nx">R3</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce8c</span>		<span class="nx">aa0303e4</span>		<span class="nx">MOVD</span> <span class="nx">R3</span><span class="p">,</span> <span class="nx">R4</span>				
</span></span><span class="line"><span class="cl">  <span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce90</span>		<span class="mi">97</span><span class="nx">ffecbc</span>		<span class="nx">CALL</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">21</span>		<span class="mh">0x10009ce94</span>		<span class="nx">f85f83fd</span>		<span class="nx">MOVD</span> <span class="o">-</span><span class="mi">8</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R29</span>		
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">21</span>		<span class="mh">0x10009ce98</span>		<span class="nx">f84907fe</span>		<span class="nx">MOVD</span><span class="p">.</span><span class="nx">P</span> <span class="mi">144</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R30</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">21</span>		<span class="mh">0x10009ce9c</span>		<span class="nx">d65f03c0</span>		<span class="nx">RET</span>					
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cea0</span>		<span class="nx">aa1e03e3</span>		<span class="nx">MOVD</span> <span class="nx">R30</span><span class="p">,</span> <span class="nx">R3</span>				
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cea4</span>		<span class="mi">97</span><span class="nx">ff39d7</span>		<span class="nx">CALL</span> <span class="nx">runtime</span><span class="p">.</span><span class="nx">morestack_noctxt</span><span class="p">.</span><span class="nf">abi0</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>	
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009cea8</span>		<span class="mi">17</span><span class="nx">ffffae</span>		<span class="nx">JMP</span> <span class="nx">main</span><span class="p">.</span><span class="nf">main</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>			
</span></span><span class="line"><span class="cl">  <span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">8</span>		<span class="mh">0x10009ceac</span>		<span class="mo">00000000</span>		<span class="err">?</span>					
</span></span></code></pre></div></div><p>关键部分</p>
<div class="c-code"><div class="c-code__header"><div class="c-code__dots"><span class="red"></span><span class="yellow"></span><span class="green"></span></div><div class="c-code__lang">go</div><div class="c-code__actions"><button class="c-code__btn c-code__btn--copy" title="Copy code"><i class="fas fa-copy"></i></button><button class="c-code__btn c-code__btn--fold" title="Fold code"><i class="fas fa-chevron-up"></i></button></div></div><div class="c-code__content" data-lang="go"><pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="mh">0x10009cdd8</span>  <span class="nx">MOVD</span> <span class="mi">48</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R0</span>        <span class="p">;</span> <span class="nx">R0</span> <span class="p">=</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl"><span class="mh">0x10009cddc</span>  <span class="nx">CBZ</span>  <span class="nx">R0</span><span class="p">,</span> <span class="mi">28</span><span class="p">(</span><span class="nx">PC</span><span class="p">)</span>         <span class="p">;</span> <span class="nx">err</span><span class="o">==</span><span class="kc">nil</span> <span class="o">-</span><span class="p">&gt;</span> <span class="err">跳到</span> <span class="mh">0x10009cdf8</span>
</span></span><span class="line"><span class="cl"><span class="err">────────</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="err">路径</span> <span class="err">────────</span>
</span></span><span class="line"><span class="cl"><span class="mh">0x10009cde0</span>  <span class="nx">MOVD</span> <span class="mi">24</span><span class="p">(</span><span class="nx">R0</span><span class="p">),</span> <span class="nx">R1</span>          
</span></span><span class="line"><span class="cl"><span class="mh">0x10009cde4</span>  <span class="nx">MOVD</span> <span class="mi">56</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R0</span>        <span class="p">;</span> <span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprintln</span> <span class="err">参数</span>
</span></span><span class="line"><span class="cl"><span class="mh">0x10009cde8</span>  <span class="nf">CALL</span> <span class="p">(</span><span class="nx">R1</span><span class="p">)</span>               <span class="p">;</span> <span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>                                  <span class="p">;</span> <span class="err">打印</span> <span class="o">&amp;</span> <span class="nx">RET</span>
</span></span><span class="line"><span class="cl"><span class="err">───────────────────────────────</span>
</span></span><span class="line"><span class="cl"><span class="mh">0x10009cdf4</span>  <span class="nf">STP</span> <span class="p">(</span><span class="nx">ZR</span><span class="p">,</span><span class="nx">ZR</span><span class="p">),</span> <span class="mi">88</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>     
</span></span><span class="line"><span class="cl"><span class="mh">0x10009cdf8</span>  <span class="nx">ADD</span> <span class="err">$</span><span class="mi">3360</span><span class="p">,</span> <span class="nx">R2</span><span class="p">,</span> <span class="nx">R2</span>       <span class="p">;</span> <span class="err">构造</span> <span class="o">&amp;</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span> <span class="err">常量</span>
</span></span><span class="line"><span class="cl"><span class="mh">0x10009ce0c</span>  <span class="nx">CALL</span> <span class="nx">runtime</span><span class="p">.</span><span class="nx">convTstring</span><span class="p">;</span> <span class="o">*</span><span class="nx">File</span><span class="p">.</span><span class="nx">name</span> <span class="err">→</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="mh">0x10009ce20</span>  <span class="err">…</span>                       <span class="p">;</span> <span class="err">接着准备</span> <span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprintln</span>
</span></span><span class="line"><span class="cl"><span class="mh">0x10009ce3c</span>  <span class="nx">CALL</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>   <span class="p">;</span> <span class="err">打印</span> <span class="nx">name</span>
</span></span></code></pre></div></div><p>而如果加上了一行print的话</p>
<div class="c-code"><div class="c-code__header"><div class="c-code__dots"><span class="red"></span><span class="yellow"></span><span class="green"></span></div><div class="c-code__lang">go</div><div class="c-code__actions"><button class="c-code__btn c-code__btn--copy" title="Copy code"><i class="fas fa-copy"></i></button><button class="c-code__btn c-code__btn--fold" title="Fold code"><i class="fas fa-chevron-up"></i></button></div></div><div class="c-code__content" data-lang="go"><pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009cdd4</span>		<span class="nx">f9402be4</span>		<span class="nx">MOVD</span> <span class="mi">80</span><span class="p">(</span><span class="nx">RSP</span><span class="p">),</span> <span class="nx">R4</span>			
</span></span><span class="line"><span class="cl"><span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009cdd8</span>		<span class="nx">f9400084</span>		<span class="nf">MOVD</span> <span class="p">(</span><span class="nx">R4</span><span class="p">),</span> <span class="nx">R4</span>
</span></span><span class="line"><span class="cl"><span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">12</span>		<span class="mh">0x10009cddc</span>		<span class="nx">d503201f</span>		<span class="nx">NOOP</span>		
</span></span><span class="line"><span class="cl"><span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009cde0</span>		<span class="nx">f9401c85</span>		<span class="nx">MOVD</span> <span class="mi">56</span><span class="p">(</span><span class="nx">R4</span><span class="p">),</span> <span class="nx">R5</span>				
</span></span><span class="line"><span class="cl"><span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009cde4</span>		<span class="nx">f90027e5</span>		<span class="nx">MOVD</span> <span class="nx">R5</span><span class="p">,</span> <span class="mi">72</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>			
</span></span><span class="line"><span class="cl"><span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009cde8</span>		<span class="nx">f9402084</span>		<span class="nx">MOVD</span> <span class="mi">64</span><span class="p">(</span><span class="nx">R4</span><span class="p">),</span> <span class="nx">R4</span>				
</span></span><span class="line"><span class="cl"><span class="nx">file</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">62</span>		<span class="mh">0x10009cdec</span>		<span class="nx">f9001fe4</span>		<span class="nx">MOVD</span> <span class="nx">R4</span><span class="p">,</span> <span class="mi">56</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>			
</span></span><span class="line"><span class="cl"><span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">13</span>		<span class="mh">0x10009cdf0</span>		<span class="nx">b00001a4</span>		<span class="nx">ADRP</span> <span class="mi">217088</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R4</span>			
</span></span><span class="line"><span class="cl"><span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">13</span>		<span class="mh">0x10009cdf4</span>		<span class="mi">913</span><span class="nx">d8084</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">3936</span><span class="p">,</span> <span class="nx">R4</span><span class="p">,</span> <span class="nx">R4</span>			
</span></span><span class="line"><span class="cl"><span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">13</span>		<span class="mh">0x10009cdf8</span>		<span class="nx">f90047e4</span>		<span class="nx">MOVD</span> <span class="nx">R4</span><span class="p">,</span> <span class="mi">136</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>			
</span></span><span class="line"><span class="cl"><span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">13</span>		<span class="mh">0x10009cdfc</span>		<span class="nx">f0000124</span>		<span class="nx">ADRP</span> <span class="mi">159744</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R4</span>			
</span></span><span class="line"><span class="cl"><span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">13</span>		<span class="mh">0x10009ce00</span>		<span class="mi">913</span><span class="nx">d0084</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">3904</span><span class="p">,</span> <span class="nx">R4</span><span class="p">,</span> <span class="nx">R4</span>			
</span></span><span class="line"><span class="cl"><span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">13</span>		<span class="mh">0x10009ce04</span>		<span class="nx">f9004be4</span>		<span class="nx">MOVD</span> <span class="nx">R4</span><span class="p">,</span> <span class="mi">144</span><span class="p">(</span><span class="nx">RSP</span><span class="p">)</span>			
</span></span><span class="line"><span class="cl"><span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce08</span>		<span class="nx">b00006db</span>		<span class="nx">ADRP</span> <span class="mi">888832</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R27</span>	
</span></span><span class="line"><span class="cl"><span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce0c</span>		<span class="nx">f9471761</span>		<span class="nx">MOVD</span> <span class="mi">3624</span><span class="p">(</span><span class="nx">R27</span><span class="p">),</span> <span class="nx">R1</span>		
</span></span><span class="line"><span class="cl"><span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce10</span>		<span class="mi">90000280</span>		<span class="nx">ADRP</span> <span class="mi">327680</span><span class="p">(</span><span class="nx">PC</span><span class="p">),</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl"><span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce14</span>		<span class="mi">910</span><span class="nx">c6000</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">792</span><span class="p">,</span> <span class="nx">R0</span><span class="p">,</span> <span class="nx">R0</span>		
</span></span><span class="line"><span class="cl"><span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce18</span>		<span class="mf">910223e2</span>		<span class="nx">ADD</span> <span class="err">$</span><span class="mi">136</span><span class="p">,</span> <span class="nx">RSP</span><span class="p">,</span> <span class="nx">R2</span>		
</span></span><span class="line"><span class="cl"><span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce1c</span>		<span class="nx">b24003e3</span>		<span class="nx">ORR</span> <span class="err">$</span><span class="mi">1</span><span class="p">,</span> <span class="nx">ZR</span><span class="p">,</span> <span class="nx">R3</span>			
</span></span><span class="line"><span class="cl"><span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce20</span>		<span class="nx">aa0303e4</span>		<span class="nx">MOVD</span> <span class="nx">R3</span><span class="p">,</span> <span class="nx">R4</span>				
</span></span><span class="line"><span class="cl"><span class="nx">print</span><span class="p">.</span><span class="k">go</span><span class="p">:</span><span class="mi">314</span>		<span class="mh">0x10009ce24</span>		<span class="mi">97</span><span class="nx">ffecd7</span>		<span class="nx">CALL</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">SB</span><span class="p">)</span>
</span></span></code></pre></div></div><p><code>f.Name()</code>在CBZ之前就取了, 自然就panic了</p>
<h2 id="结语">结语</h2>
<p>这种本应暴露的空指针错误却被优化掉,个人认为不应该依赖这种行为,也不应把它视为&quot;好特性&quot; (</p>
<p>后续找到有个类似的<a href="https://github.com/golang/go/issues/72860?utm_source=chatgpt.com">issue</a></p>
</article>

        <nav class="c-post__nav">
            
            <a href="/post/6%e6%9c%883%e6%97%a5-%e8%87%aa%e7%9c%81" class="c-post__nav-card c-post__nav-card--prev">
                <h3>‹ 上一篇</h3>
                <p class="c-post__nav-title">6月3日 自省</p>
            </a>
            

            
            <a href="/post/golang-gc" class="c-post__nav-card c-post__nav-card--next">
                <h3>下一篇 ›</h3>
                <p class="c-post__nav-title">Golang GC</p>
            </a>
            
        </nav>
    </div>
</div>

    </main>
    <footer class="c-footer">
        <span id="jinrishici-sentence" class="c-footer__quote">今日诗词加载中....</span>
        <div class="c-footer__copy">
            Copyright © <span id="currentYear">2025</span> Dionysus. All rights reserved.
        </div>
    </footer>
</div>

<div id="algolia-search-mask" class="c-search-mask"></div>
<div id="algolia-search-modal" class="c-search-modal">
    <div class="c-search-modal__box">
        <div class="c-search-modal__header">搜索</div>
        <div class="c-search-modal__summary" id="algolia-search-summary" style="display:none;">共找到 0 条结果</div>
        <input type="text" id="algolia-search-input" class="c-search-modal__input" placeholder="请输入关键词..." />
        <div id="algolia-search-results" class="c-search-modal__results"></div>
        <div id="algolia-pagination" class="c-search-modal__pagination"></div>
        <hr class="c-search-modal__divider" />
    </div>
</div>

<script src='https://static.dionysus.zip/static/js/app-IJHRYWUS.js' defer></script>


<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js" defer></script>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8" defer></script>
</body>
</html>

